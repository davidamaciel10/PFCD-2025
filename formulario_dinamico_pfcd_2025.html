<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Programa Federal de Conocimiento Distribuido</title>

<!-- Fuentes -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lora:wght@600;700&family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#45658d; --ink:#242c4f; --bg:#ffffff;
  --muted:#5b668a; --bdr:#d8dee9; --pill:#cfd6e6;
  --card:#ffffff; --ring:rgba(69,101,141,.25);
}
*{box-sizing:border-box}
body{margin:0;font-family:"Montserrat",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Helvetica Neue,Arial;background:var(--bg);color:var(--ink)}

/* Header */
header{padding:18px 16px;border-bottom:1px solid var(--bdr);background:linear-gradient(90deg,#f5f7fb 0,#fff 40%)}
.header-inner{max-width:1200px;margin:0 auto;display:flex;gap:16px;align-items:center}
.logo{height:44px;width:auto}
.title-wrap{display:flex;flex-direction:column}
.title{font-family:"Lora",serif;font-weight:700;color:var(--ink);font-size:28px;margin:0}
.subtitle{margin:2px 0 0;color:var(--muted);font-size:14px}

/* CTA global */
.cta-global{background:#eef4fb;border-bottom:1px solid var(--bdr)}
.cta-global .inner{max-width:1200px;margin:0 auto;padding:12px 16px;display:flex;justify-content:center}
.cta-big{
  display:inline-block;padding:14px 22px;background:#45658d;color:#fff;
  text-decoration:none;font-weight:700;border-radius:999px;letter-spacing:.2px;
  box-shadow:0 2px 10px rgba(69,101,141,.25);
  transition:transform .12s ease, box-shadow .12s ease, background .12s ease;
}
.cta-big:hover{transform:translateY(-1px);box-shadow:0 6px 18px rgba(69,101,141,.28);background:#3c597c}

/* Layout general */
.wrap{max-width:1200px;margin:0 auto;padding:16px}
.tabs{display:flex;gap:8px;margin-bottom:12px}
.tab{background:#fff;border:1px solid var(--bdr);color:var(--ink);padding:10px 14px;border-radius:10px;cursor:pointer;font-size:14px}
.tab.active{border-color:var(--primary);color:var(--primary)}

/* Hero */
.hero{background:linear-gradient(135deg,var(--primary),var(--ink));color:#fff;border:1px solid var(--primary);border-radius:16px;padding:22px;margin-bottom:16px}
.hero h2{font-family:"Lora",serif;margin:0 0 10px;font-weight:700;color:#fff}
.hero p{margin:0 0 8px;line-height:1.6;color:#f3f6ff}
.cta a{color:#fff;text-decoration:underline}

/* CATEGORÍAS — diseño con imágenes */
#cats {
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-start;
  gap: 16px;
  margin-bottom: 20px;
}
.cat {
  position: relative;
  width: calc(25% - 12px);
  height: 230px;
  border-radius: 18px;
  overflow: hidden;
  border: 1px solid var(--bdr);
  background:#f5f7fb;
  cursor: pointer;
  box-shadow: 0 4px 16px rgba(36,44,79,.08);
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.cat:hover{transform:translateY(-3px);box-shadow:0 12px 28px rgba(36,44,79,.16);border-color:var(--primary)}
.cat::before{
  content:"";
  position:absolute;
  inset:0;
  background-size:cover;
  background-position:center;
  filter:saturate(1.1);
  transition:transform .5s ease;
}
.cat:hover::before{transform:scale(1.04)}
.cat::after{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(180deg,rgba(36,44,79,0) 30%,rgba(36,44,79,.55) 68%,rgba(36,44,79,.78) 100%);
}
.cat .content{
  position:absolute;
  inset:auto 14px 14px 14px;
  z-index:1;
  color:#fff;
  display:flex;
  flex-direction:column;
  gap:6px;
  text-align:left;
}
.cat h3{margin:0;font-size:18px;line-height:1.15;color:#fff;font-weight:700}
.cat p{margin:0;font-size:13px;opacity:.95}
.cat .cta{align-self:flex-start;background:#fff;border:1px solid #fff;color:var(--primary);border-radius:999px;padding:6px 10px;font-size:12px;box-shadow:0 2px 6px rgba(0,0,0,.12)}

/* RESPONSIVO — 4, 3, 2, 1 columnas */
@media (max-width:1100px){.cat{width:calc(33.333% - 12px)}}
@media (max-width:820px){.cat{width:calc(50% - 12px)}}
@media (max-width:520px){.cat{width:100%}}
/* Controles catálogo */
.controls{display:flex;flex-wrap:wrap;gap:12px;margin-bottom:16px}
.search{flex:1 1 260px;display:flex;align-items:center;gap:8px;background:#fff;border:1px solid var(--bdr);border-radius:10px;padding:10px 12px}
.search input{flex:1;background:transparent;border:0;outline:none;color:var(--ink)}
select,.btn{background:#fff;border:1px solid var(--bdr);color:var(--ink);border-radius:10px;padding:8px 12px;font-size:14px;cursor:pointer}
.btn:hover{border-color:var(--primary);color:var(--primary)}
.count{align-self:center;color:var(--muted);font-size:14px}

/* Cards cursos */
.grid{display:flex;flex-wrap:wrap;gap:16px}
.card{background:#fff;border:1px solid var(--bdr);border-radius:16px;width:clamp(260px,31%,360px);padding:16px;display:flex;flex-direction:column;gap:10px;box-shadow:0 2px 10px rgba(36,44,79,.06);opacity:.85;transition:opacity .25s ease,transform .2s ease}
.card:hover{opacity:1;transform:translateY(-2px)}
.card.open{opacity:1;box-shadow:0 6px 20px rgba(36,44,79,.18)}
.card h3{margin:0;font-size:18px;line-height:1.28;color:var(--ink)}
.meta{display:flex;flex-wrap:wrap;gap:8px;font-size:13px;color:var(--muted)}
.pill{border:1px solid var(--pill);background:#f5f7fb;color:var(--ink);padding:4px 8px;border-radius:999px}
.expand{background:#fff;border:1px solid #45658d33;color:var(--ink);border-radius:10px;padding:8px 12px;cursor:pointer;font-size:14px;opacity:.8;transition:all .2s ease}
.expand:hover{border-color:#45658d;color:#45658d;opacity:1}
.card.open .expand{background:#45658d;color:#fff;border-color:#45658d;opacity:1}

/* Recuadro azul para el detalle */
.details{display:none;margin-top:10px;padding:12px 14px;border:1px solid #45658d33;background:linear-gradient(180deg,#f7faff 0%,#eef4fb 100%);border-radius:12px;color:#2f3a5f}

/* Admin */
.panel{display:none}.panel.active{display:block}
.login{background:#fff;border:1px solid var(--bdr);border-radius:12px;padding:16px;max-width:520px;box-shadow:0 2px 10px rgba(36,44,79,.06)}
.row{display:flex;gap:10px;margin-bottom:10px}
.row label{width:140px;color:#4b5579;font-size:14px}
.row input[type="text"],.row input[type="password"],.row input[type="file"]{flex:1;background:#fff;border:1px solid var(--bdr);color:var(--ink);border-radius:10px;padding:8px 10px}
table{width:100%;border-collapse:collapse;font-size:14px;background:#fff}
th,td{border:1px solid var(--bdr);padding:8px}
th{background:#f5f7fb;color:var(--ink)}
.muted{color:var(--muted)}
.footer-note{margin:24px 0 8px;font-size:12px;color:var(--muted);text-align:center}
</style>
</head>

<body>
<header>
  <div class="header-inner">
    <img class="logo" src="https://www.inet.edu.ar/wp-content/themes/inet/img/logo-inet-gris.png" alt="INET - Instituto Nacional de Educación Tecnológica">
    <div class="title-wrap">
      <h2 class="title">Programa Federal de Conocimiento Distribuido</h2>
      <p class="subtitle">Propuesta educativa destinada a estudiantes de entre 14 y 16 años de la Educación Técnico Profesional (ETP), con un enfoque innovador en Programación, Diseño, Marketing, Inteligencia Artificial, Construcciones Innovadoras, Gaming y Robótica.</p>
    </div>
  </div>
</header>

<!-- BOTÓN GLOBAL -->
<div class="cta-global">
  <div class="inner">
    <a class="cta-big" href="https://forms.office.com/pages/responsepage.aspx?id=GkcF2hG7MkG5TcAjddKkGr1sbMrkRLpDi86-vgP7mX9UMTdJQk5aNTZTSDZTQ05aMUI3V0VRMlczTC4u&route=shorturl" target="_blank" rel="noopener">
      ACCEDE AL FORMULARIO DE INSCRIPCIÓN
    </a>
  </div>
</div>

<div class="wrap">
  <div class="tabs">
    <button class="tab active" data-tab="inicio">Inicio</button>
    <button class="tab" data-tab="catalogo">Catálogo</button>
    <button class="tab" data-tab="admin">Administración</button>
  </div>

  <!-- INICIO -->
  <section id="inicio" class="panel active">
    <div id="cats" class="cats"></div>
    <div class="footer-note">Hacé clic en una categoría para ver sus cursos.</div>
  </section>
  <!-- CATÁLOGO -->
  <section id="catalogo" class="panel">
    <div class="controls">
      <div class="search"><input id="q" placeholder="Buscar por título, sector o entidad..."></div>
      <select id="sector"><option value="">Todos los sectores</option></select>
      <select id="entidad"><option value="">Todas las entidades</option></select>
      <button id="toggleAll" class="btn">expandir todo</button>
      <span id="count" class="count"></span>
    </div>
    <div id="grid" class="grid"></div>
    <div class="footer-note">Fuente local: datos guardados en tu navegador (localStorage).</div>
  </section>

  <!-- ADMIN -->
  <section id="admin" class="panel">
    <div id="adminContent"></div>
  </section>
</div>

<script>
/* ===== Config / almacenamiento ===== */
const AUTH_USER = "admin", AUTH_PASS = "cenet2025";
const STORAGE_KEY = "cursos_inet_cenet";
let cursos = loadCursos();

function loadCursos(){
  try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || [] }
  catch { return [] }
}
function saveCursos(arr){ localStorage.setItem(STORAGE_KEY, JSON.stringify(arr || [])); }

/* ===== Utilidades ===== */
function esc(s){ return (s??"").toString().replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

/* ===== Catálogo ===== */
const grid=document.getElementById('grid');
const q=document.getElementById('q');
const sectorSel=document.getElementById('sector');
const entidadSel=document.getElementById('entidad');
const toggleAllBtn=document.getElementById('toggleAll');
const countEl=document.getElementById('count');

function buildFilters(){
  sectorSel.innerHTML='<option value="">Todos los sectores</option>';
  entidadSel.innerHTML='<option value="">Todas las entidades</option>';
  [...new Set(cursos.map(c=>c.sector).filter(Boolean))].sort().forEach(s=>sectorSel.insertAdjacentHTML('beforeend',`<option>${s}</option>`));
  [...new Set(cursos.map(c=>c.entidad).filter(Boolean))].sort().forEach(e=>entidadSel.insertAdjacentHTML('beforeend',`<option>${e}</option>`));
}

function crearCard(c){
  const el = document.createElement('article');
  el.className = 'card';
  el.innerHTML = `
    <h3>${esc(c.titulo||"Sin título")}</h3>
    <div class="meta">
      <span class="pill">${esc(c.sector||"")}</span>
      <span class="pill">Duración ${esc(c.duracion||"-")}</span>
    </div>
    <button class="expand" aria-expanded="false">ver más</button>
    <div class="details" aria-hidden="true" style="display:none">
      <p>${esc(c.sintesis||"")}</p>
      <p style="color:#45658d">Ofrecido por: ${esc(c.entidad||"-")}</p>
    </div>`;
  const btn = el.querySelector('.expand');
  const det = el.querySelector('.details');
  btn.onclick = () => {
    const open = det.style.display === 'block';
    det.style.display = open ? 'none' : 'block';
    btn.textContent = open ? 'ver más' : 'ver menos';
    el.classList.toggle('open', !open);
  };
  return el;
}

function render(list){
  grid.innerHTML='';
  list.forEach(c=>grid.appendChild(crearCard(c)));
  countEl.textContent = `${list.length} curso${list.length!==1?'s':''}`;
}

function filtrar(){
  const term = q.value.trim().toLowerCase(),
        s = sectorSel.value,
        e = entidadSel.value;
  render(cursos.filter(c=>{
    const txt = `${c.titulo||""} ${c.sector||""} ${c.entidad||""}`.toLowerCase();
    return (!term || txt.includes(term)) && (!s || c.sector===s) && (!e || c.entidad===e);
  }));
}

q?.addEventListener('input',filtrar);
sectorSel?.addEventListener('change',filtrar);
entidadSel?.addEventListener('change',filtrar);

toggleAllBtn?.addEventListener('click',()=>{
  const open = toggleAllBtn.dataset.state!=='open';
  document.querySelectorAll('#grid .details').forEach(d=>d.style.display=open?'block':'none');
  document.querySelectorAll('#grid .expand').forEach(b=>b.textContent=open?'ver menos':'ver más');
  toggleAllBtn.dataset.state = open ? 'open':'closed';
  toggleAllBtn.textContent = open ? 'colapsar todo' : 'expandir todo';
});

/* ===== Inicio (categorías) ===== */
const categoriasOrden = [
  "Programación","Diseño","Marketing",
  "Inteligencia Artificial","Construcciones Innovadoras","Gaming","Robótica"
];

function buildCategorias(){
  const cont=document.getElementById('cats'); cont.innerHTML='';
  const counts=Object.fromEntries(categoriasOrden.map(k=>[k,0]));
  cursos.forEach(c=>{ if(counts[c.sector]!=null) counts[c.sector]++; });
  const img={
    "Programación":"https://images.unsplash.com/photo-1607799279861-4dd421887fb3?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1170",
    "Diseño":"https://plus.unsplash.com/premium_photo-1661382011487-cd3d6b1d9dff?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1171",
    "Marketing":"https://images.unsplash.com/photo-1711097383282-28097ae16b1d?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1170",
    "Inteligencia Artificial":"https://images.unsplash.com/photo-1697577418970-95d99b5a55cf?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=996",
    "Construcciones Innovadoras":"https://unsplash.com/es/fotos/edificio-moderno-con-fachada-geometrica-unica-y-balcones-vbaUvlA7e60",
    "Gaming":"https://images.unsplash.com/photo-1511512578047-dfb367046420?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1171",
    "Robótica":"https://images.unsplash.com/photo-1518314916381-77a37c2a49ae?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cm9ib3RpY2F8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&q=60&w=1000"
  };
  categoriasOrden.forEach(cat=>{
    const el=document.createElement('button');
    el.type='button';
    el.className='cat';
    el.style.backgroundImage=`url('${img[cat]}')`;
    const style=document.createElement('style');
    style.textContent=`.cat[style*="${cat}"]::before{background-image:url("${img[cat]}")}`;
    document.head.appendChild(style);
    el.innerHTML=`<div class="content"><h3>${cat}</h3><p>${counts[cat]||0} curso${(counts[cat]||0)!==1?'s':''}</p><span class="cta">ver cursos</span></div>`;
    el.onclick=()=>{
      goTab('catalogo');
      buildFilters();
      sectorSel.value=cat;
      filtrar();
      document.getElementById('catalogo').scrollIntoView({behavior:'smooth',block:'start'});
    };
    cont.appendChild(el);
  });
}

/* ===== Admin ===== */
const adminRoot=document.getElementById('adminContent');
function isAuthed(){ return sessionStorage.getItem('auth_ok')==='1'; }
function requireLogin(){
  adminRoot.innerHTML=`<div class="login">
    <h3>Acceso a administración</h3>
    <p class="muted">Acceso local (demo). Para seguridad real necesitás backend.</p>
    <div class="row"><label>Usuario</label><input id="u" type="text"></div>
    <div class="row"><label>Contraseña</label><input id="p" type="password"></div>
    <div class="row"><span style="width:140px"></span><button id="loginBtn" class="btn">ingresar</button></div>
  </div>`;
  document.getElementById('loginBtn').onclick=()=>{
    const u=document.getElementById('u').value.trim(), p=document.getElementById('p').value;
    if(u===AUTH_USER && p===AUTH_PASS){ sessionStorage.setItem('auth_ok','1'); renderAdmin(); }
    else alert('Usuario o contraseña incorrectos');
  };
}

function renderAdmin(){
  if(!isAuthed()) return requireLogin();
  adminRoot.innerHTML=`<div class="login" style="max-width:100%">
    <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px">
      <h3 style="margin:0">Administración de cursos</h3>
      <div style="display:flex;gap:8px">
        <button class="btn" id="exportCsv">exportar CSV</button>
        <button class="btn" id="exportJson">backup JSON</button>
        <button class="btn" id="clearData">limpiar datos</button>
        <button class="btn" id="logout">salir</button>
      </div>
    </div>
    <p class="muted" style="margin:8px 0 16px">
      Importá un CSV UTF-8 con encabezados: n,titulo,sector,duracion,sintesis,entidad
      <button class="btn" id="dlTemplate" style="margin-left:8px">descargar plantilla</button>
    </p>
    <div class="row"><label>Archivo CSV</label><input id="fileCsv" type="file" accept=".csv,text/csv"></div>
    <div class="row"><span style="width:140px"></span>
      <button class="btn" id="parseBtn">previsualizar</button>
      <button class="btn" id="saveBtn" disabled>guardar en navegador</button>
    </div>
    <div id="previewWrap" style="margin-top:16px;overflow:auto;max-height:420px;"></div>
    <h4 style="margin-top:18px">Registros actuales: ${cursos.length}</h4>
    <div class="muted" style="font-size:13px">Los datos se guardan en localStorage y alimentan el Catálogo y el Inicio.</div>
  </div>`;

  document.getElementById('logout').onclick=()=>{sessionStorage.removeItem('auth_ok');requireLogin();};
  document.getElementById('clearData').onclick=()=>{if(confirm('¿Eliminar todos los cursos?')){cursos=[];saveCursos(cursos);buildFilters();filtrar();buildCategorias();renderAdmin();}};
  document.getElementById('exportCsv').onclick=()=>{const blob=new Blob([toCSV(cursos)],{type:"text/csv;charset=utf-8"});const a=Object.assign(document.createElement('a'),{href:URL.createObjectURL(blob),download:'cursos_export.csv'});document.body.appendChild(a);a.click();a.remove();};
  document.getElementById('exportJson').onclick=()=>{const blob=new Blob([JSON.stringify(cursos,null,2)],{type:"application/json"});const a=Object.assign(document.createElement('a'),{href:URL.createObjectURL(blob),download:'cursos_backup.json'});document.body.appendChild(a);a.click();a.remove();};
  document.getElementById('dlTemplate').onclick=()=>{const tpl="n,titulo,sector,duracion,sintesis,entidad\n1,Community Manager,Marketing,21 horas,Gestión de comunidades,Argentec";const blob=new Blob([tpl],{type:"text/csv;charset=utf-8"});const a=Object.assign(document.createElement('a'),{href:URL.createObjectURL(blob),download:'plantilla_cursos.csv'});document.body.appendChild(a);a.click();a.remove();};

  let parsed=null;
  document.getElementById('parseBtn').onclick=()=>{
    const file=document.getElementById('fileCsv').files[0];
    if(!file) return alert('Seleccioná un CSV primero.');
    const reader=new FileReader();
    reader.onload=(e)=>{
      const rows=e.target.result.split(/\r?\n/).map(r=>r.split(','));
      if(!rows.length) return alert('CSV vacío');
      const header=rows[0].map(h=>h.trim());
      const idx={n:header.indexOf('n'),titulo:header.indexOf('titulo'),sector:header.indexOf('sector'),duracion:header.indexOf('duracion'),sintesis:header.indexOf('sintesis'),entidad:header.indexOf('entidad')};
      const data=[];
      for(let r=1;r<rows.length;r++){
        const row=rows[r]; if(!row||row.every(c=>!c.trim())) continue;
        data.push({n:row[idx.n],titulo:row[idx.titulo],sector:row[idx.sector],duracion:row[idx.duracion],sintesis:row[idx.sintesis],entidad:row[idx.entidad]});
      }
      parsed=data;
      const table=document.createElement('table');
      table.innerHTML=`<thead><tr><th>n</th><th>titulo</th><th>sector</th><th>duracion</th><th>sintesis</th><th>entidad</th></tr></thead>
      <tbody>${data.map(o=>`<tr><td>${o.n}</td><td>${esc(o.titulo)}</td><td>${esc(o.sector)}</td><td>${esc(o.duracion)}</td><td>${esc(o.sintesis)}</td><td>${esc(o.entidad)}</td></tr>`).join('')}</tbody>`;
      document.getElementById('previewWrap').innerHTML="";
      document.getElementById('previewWrap').appendChild(table);
      document.getElementById('saveBtn').disabled=!data.length;
    };
    reader.readAsText(file,'utf-8');
  };
  document.getElementById('saveBtn').onclick=()=>{
    if(!parsed?.length) return alert('No hay datos parseados.');
    if(!confirm(`Guardar ${parsed.length} cursos y reemplazar los existentes?`)) return;
    cursos=parsed.slice(); saveCursos(cursos); buildFilters(); filtrar(); buildCategorias();
    alert('Cursos guardados. Inicio y Catálogo actualizados.');
  };
}

/* ===== Utilidades CSV ===== */
function toCSV(arr){
  const headers=["n","titulo","sector","duracion","sintesis","entidad"];
  const escv=v=>{const s=(v??"").toString();return /[",\n]/.test(s)?'"'+s.replace(/"/g,'""')+'"':s};
  return [headers.join(","),...arr.map(o=>headers.map(h=>escv(o[h])).join(","))].join("\n");
}

/* ===== Tabs ===== */
function goTab(id){
  document.querySelectorAll('.tab').forEach(b=>b.classList.toggle('active',b.dataset.tab===id));
  document.querySelectorAll('.panel').forEach(p=>p.classList.toggle('active',p.id===id));
  if(id==='admin') renderAdmin();
}

/* ===== Inicialización ===== */
document.querySelectorAll('.tab').forEach(btn=>{ btn.onclick=()=>goTab(btn.dataset.tab); });
buildFilters();
filtrar();
buildCategorias();
</script>
</body>
</html>
